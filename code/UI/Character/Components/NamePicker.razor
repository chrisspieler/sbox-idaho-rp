@using Sandbox;
@using Sandbox.UI;

@namespace IdahoRP.UI
@inherits Sandbox.UI.Panel;

<root>
    <h2>Choose your name</h2>
    <div class="hr"/>
    <div id="nameEntryBottom">
        <button class="icon tiny clear" onclick=@(_ => GenerateRandomName())>casino</button>
        <TextEntry @ref="NameText"/>
    </div>
</root>

@code {
    public TextEntry NameText { get; set; }
    public string SelectedName 
    { 
        get => _selectedName; 
        set
        {
            _selectedName = value;
            if (NameText != null)
                NameText.Text = value;
        }
    }
    private string _selectedName;

    public NamePicker()
    {

    }

    protected override void OnAfterTreeRender(bool firstTime)
    {
        if (!firstTime)
            return;

        NameText.Text = SelectedName;
    }

    public void GenerateRandomName()
    {
        var randomName = RandomNameGenerator.GenerateRandomName();
        SelectedName = randomName;
    }
}